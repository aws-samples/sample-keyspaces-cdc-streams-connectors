# Sample configuration for SQS Connector with JEXL Filter Expression
# This configuration demonstrates how to use JEXL expressions to filter records

keyspaces-cdc-streams {
  stream {
    keyspace-name = "media"
    table-name = "movies"
  }
  
  connector {
    queue-url = "https://sqs.us-east-1.amazonaws.com/123456789012/movies-cdc-events"
    region = "us-east-1"
    message-format = "full"
    include-metadata = true
    delay-seconds = 0
    
    # JEXL Filter Expression Examples:
    # Uncomment and modify one of the following examples:
    
    # Example 1: Filter by operation type (only process INSERT operations)
    # jexl-filter-expression = "metadata.operation == 'INSERT'"
    
    # Example 2: Filter by field value (only process movies with popularity > 100)
    # jexl-filter-expression = "popularity > 100"
    
    # Example 3: Filter by multiple conditions (INSERT operations with high popularity)
    # jexl-filter-expression = "metadata.operation == 'INSERT' && popularity > 50"
    
    # Example 4: Filter by string field (only process movies with specific language)
    # jexl-filter-expression = "original_lang == 'en'"
    
    # Example 5: Filter by nested field access (if you have nested data structures)
    # jexl-filter-expression = "newImage.rating > 7.0"
    
    # Example 6: Complex filter with multiple conditions
    # jexl-filter-expression = "(metadata.operation == 'INSERT' || metadata.operation == 'UPDATE') && (popularity > 50 || vote_average > 7.0)"
    
    # Example 7: Filter by date (if you have date fields)
    # jexl-filter-expression = "rel_date != null && rel_date != ''"
    
    # Example 8: Filter by field existence and value
    # jexl-filter-expression = "vote_count != null && vote_count > 1000"
    
    # Example 9: Filter by operation type and exclude certain values
    # jexl-filter-expression = "metadata.operation == 'INSERT' && original_lang != 'unknown'"
    
    # Example 10: Filter by numeric range
    # jexl-filter-expression = "popularity >= 10 && popularity <= 1000"
    
    # Current active filter (uncomment to enable):
    # jexl-filter-expression = "metadata.operation == 'INSERT'"
  }
}
